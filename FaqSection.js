const { ref, computed, watch } = Vue

// FaqItem Component
const FaqItem = {
  props: ['question', 'answer', 'index', 'activeItem'],
  emits: ['toggle'],
  setup(props, { emit }) {
    const answerRef = ref(null);

    const isOpen = computed(() => props.activeItem === props.index);

    const toggleAccordion = () => {
      emit('toggle', props.index);
    };

    watch(isOpen, (newVal) => {
      if (answerRef.value) {
        answerRef.value.style.maxHeight = newVal ? `${answerRef.value.scrollHeight}px` : null;
      }
    });

    return {
      isOpen,
      toggleAccordion,
      answerRef
    };
  },
  template: `
    <div class="faq-card">
      <div class="faq-question" :class="{'active': isOpen}" @click="toggleAccordion">
        <span><i class="fas fa-question-circle"></i> {{ question.title }}</span>
        <i class="fas fa-chevron-down faq-icon"></i>
      </div>
      <div class="faq-card-answer" :class="{'active': isOpen}" ref="answerRef">
        <div v-html="answer"></div>
      </div>
    </div>
  `
};

// FaqSection Component
export const FaqSection = {
  components: { FaqItem },
  props: ['faqs'],
  setup() {
    const activeItem = ref(null);

    const handleToggle = (index) => {
      activeItem.value = activeItem.value === index ? null : index;
    };

    return {
      activeItem,
      handleToggle
    };
  },
  template: `
    <div class="container">
      <div class="section-title">
        <h2>常見問答</h2>
        <p>關於同心華德福教育理念與實踐的問答集</p>
      </div>
      <div class="faq-container">
        <FaqItem
          v-for="(faq, index) in faqs"
          :key="index"
          :question="faq.question"
          :answer="faq.answer"
          :index="index"
          :activeItem="activeItem"
          @toggle="handleToggle"
        />
      </div>
    </div>
  `
};

// FAQ Data (extracted from content/faq-content.html)
export const faqData = [
  {
    question: { title: '1. 如何看待孩子／一個人？' },
    answer: `
      <p>在同心這個家，我們不需要創造奇蹟，因為它無所不在。</p>
      <p>每個孩子來到我們面前，都是兩個豐盛的相遇</p>
      <p>每個孩子都是一個謎，需要從不同的線索來遇見他</p>
      <p>孩子也是我們的一面鏡子，看見孩子的行為表徵，同時也內觀自己的不足之處</p>
      <p>透過兒童觀察</p>
      <p>我們將從孩子的五官特徵、身體表現、人格特質、四種氣質（風火水土）、十二感官</p>
      <p>以及意志／情感／思考等各種面向來對孩子有更多的瞭解與認識。</p>
      <p>符應孩子的身心發展階段，期盼能使孩子成為如其所是的人。</p>
    `
  },
  {
    question: { title: '2. 同心的教學方法？' },
    answer: `
      <p>順應孩子每個階段的發展任務</p>
      <p>給予深化連結的課程活動與故事</p>
      <p>符應人智學的教與思維脈絡</p>
      <p>7-14歲的孩子最主要的發展是發展「情感」面向的學習。</p>
      <p>7-8歲在情感中鍛鍊意志，透過親身感官接觸與自然相處，</p>
      <p>以及在生活中練習工作規律與秩序，孩子建立動手做的能力</p>
      <p>9歲的孩子透過農耕與建築的課程找到內在與世界連結的安全感</p>
      <p>10歲的孩子走出校園探訪地方社區，帶著內在旺盛的生命力開始向外探索</p>
      <p>11歲的孩子身心達到和諧平衡的狀態</p>
      <p>植物學的課程開啟了第一堂客觀的科學課入門</p>
      <p>語文言文則的人類發展說寫讀讓孩子的語感長出豐沛的力量</p>
      <p>藝術美勞課程會參孩子力與美的展現</p>
      <p>12歲之後逐漸個人情感中的思維</p>
      <p>科學、天文學、地理等課程這次帶領孩子運用感官「客觀」觀察自然的運行</p>
      <p>進入探索宇宙與牠的學說旅程，延續連結中學的課程</p>
      <p>跟身經驗、感官觀察、故事圖像的教學方法</p>
      <p>體驗式捲疊每一個學習階段的發展能力</p>
      <p>孩子內在習得的不只是知識而是生命的感受與經驗反芻後的記憶</p>
    `
  },
  {
    question: { title: '3. 聽說華德福的孩子都在玩，玩得出什麼學問嗎？' },
    answer: `
      <p>孩子在戶外體驗中學到的不只是技能與知識</p>
      <p>更透過外在的探索發現內在心靈的各個面向</p>
    `
  },
  {
    question: { title: '4. 同心華德福的生活節奏以及課程特色？' },
    answer: `
      <p>同心的生活節奏如下：</p>
      <h3>週期循環主課程</h3>
      <p>包括語文、數學、自然科學、社會（歷史、地理）等科目。</p>
      <p>每天上午 8:20-10:20 進行120分鐘教學，</p>
      <p>連續二到四週，教學貼周而復始地進行。</p>
      <ul>
          <li>小學階段由主帶教師負責主課程。</li>
          <li>中學階段將依主課科目，由專職教師授課。</li>
      </ul>
      <h3>副課程</h3>
      <p>手工、藝術、外語、寫生、農藝、泥塑、音樂、</p>
      <p>木工、音樂、體育活動等，每週或隔週固定時段上課。</p>
      <p>由該科目的專業教師帶領課程</p>
    `
  },
  {
    question: { title: '5. 孩子的學習表現？能力如何評量？' },
    answer: `
      <p>如何了解孩子的能力與學習狀態？</p>
      <p>在華德福教育當中，我們著重兩個面向的發展。</p>
      <p>一是生理發展，其二是心理與認知發展。</p>
      <p>透過每天的晨圈活動及動態性課程，教師訓練孩子的身體協調性，及觀察所有感官的發展。</p>
      <p>從一到九年級，透過工作本記錄孩子每天的學習。</p>
      <p>教師及家長便能從孩子的工作本了解孩子的每日學習進程。</p>
      <p>每日的活動過程當中，教師設計相關的教學活動，以瞭解孩子學科的學習狀態。</p>
      <p>五年級起，由於孩子抽象思考能力的發展，課程中則會增添部分紙筆測驗。</p>
      <p>每學期至少安排一次親師面談</p>
      <p>面談過程當中會一同閱讀孩子的工作本，瞭解孩子在學校學習狀態。</p>
      <p>另外，學期結束也將提供家長一份孩子個別的學習質性評量，給予孩子發展狀態，和各學科學習能力的描述。</p>
    `
  },
  {
    question: { title: '6. 未來轉銜的可能性' },
    answer: `
      <p>華德福教育有別人花魁的發展圖像</p>
      <p>從幼兒園到高中</p>
      <p>我們期待培養出健全、獨立、自主的人</p>
      <p>華德福教育有別人完整的發展圖像，從幼兒園到高中。我們期待培養出健全、獨立、自主的人</p>
      <p>華德福教育（含實驗教育）的目標是培養人的整體發展，期盼能發展出人的主動、能動、能從眾與能共好</p>
      <p>是一群，透過華德福教育，設計讓教育之美，社會改革的先鋒</p>
      <p>同心截至108學年度，學校第七年級到九年級。我們同樣有從幼兒園到高中的辦學圖像</p>
      <p>在還沒有高中部之前，九年級的畢業生也能夠依據對自己的瞭解</p>
      <p>選擇符合與各式升學管道（包括華德福高中、特色獨招等）</p>
    `
  },
  {
    question: { title: '7. 華德福學校畢業生的發展？' },
    answer: `
      <p>同心的畢業生都有華德福學校的畢業證書，同心也會給每個畢業生屬於同心華德福的畢業證書</p>
      <p>從過去的經驗觀察到，華德福學校畢業後的孩子能夠獨當一面，自主自立，同時積極參與社會裡</p>
      <p>根據社會企業的需求而來</p>
      <p>企業親睞的人才，人品佳、能獨立解決問題、能團隊合作是其核心的三項能力</p>
      <p>以此來看，華德福學校的畢業生在各行各業都是充滿競爭力的</p>
      <p>除此之外，華德福學校依然充滿身心平衡的行為</p>
      <p>畢業生在其生命自然之下，也踏實務實、美、勇敢在自己的生命核心中</p>
      <p>帶著這個核心，從華德福學校的畢業生無論在各行各業都能夠完成自我，綻放出獨特的樣貌。</p>
    `
  },
  {
    question: { title: '8. 華德福老師的特質？' },
    answer: `
      <p>「我們相信孩子的能力成為「人」才，唯有出自真正的人。</p>
      <p>我們的華德福教育從來不只學科知識上的，孩子無時無刻也都是學習著教師的人品、人格）</p>
      <p>因此我們期許自己能抱持一顆無愧於孩子的心，願意成為能引導孩子仿效的鏡像，發自心靈平穩的成人</p>
      <ul>
          <li>對孩子有愛心與耐心，仁慈、寬厚，願意主動關懷且無差別地對待每一個孩子</li>
      </ul>
      <p>並能深度理解每位孩子的發展及需求，與孩子真實地相處。</p>
      <ul>
          <li>三、教師必須勇於探索，嘗試適合孩子的教育與引導，持續自我精進，主動參與華德福師資進修與課程</li>
      </ul>
      <p>願真實地應對自身不足之處，自我檢視與勇敢約束，不害怕犯錯。</p>
      <p>最重要的是在孩子面前也能夠承認並修正自己的錯誤</p>
      <p>因為我們相信孩子不會只在當中看到失敗，而是會看到教師如何在跌倒中站起來</p>
      <p>在過新中修正與鍛鍊，在困境中成長！</p>
      <p>這才是人之所以為人的關鍵能力，也是華德福教師任華德福教師的核心狀態</p>
      <ul>
          <li>四、能與學生同心協力、搭檔，身體力行</li>
      </ul>
      <p>一齊為創造孩子們的偉大目標，營造身心靈健全成長的環境為其共同努力之目標。</p>
      <ul>
          <li>五、能主動關懷每一個個案，願意以愛為出發點</li>
      </ul>
      <p>嘗試各種家長溝通的可能性，並引導家長對於華德福教育及孩子的發展有更深入的了解。</p>
    `
  },
  {
    question: { title: '9. 同心華德福的日常作息、課後照顧的規劃？' },
    answer: `
      <h3>各年級上下課作息時間表</h3>
      <table class="schedule-table">
        <thead>
          <tr>
            <th>星期</th>
            <th>一年級</th>
            <th>二年級</th>
            <th><th>三年級</th>
            <th>四年級</th>
            <th>五年級</th>
            <th>六年級</th>
            <th>七到九年級</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>星期一</td>
            <td>8:10-14:00</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-16:00</td>
          </tr>
          <tr>
            <td>星期二</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-16:00</td>
          </tr>
          <tr>
            <td>星期三</td>
            <td>8:10-14:00</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-16:00</td>
          </tr>
          <tr>
            <td>星期四</td>
            <td>8:10-14:00</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>-</td>
          </tr>
          <tr>
            <td>星期五</td>
            <td>8:10-14:00</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>8:10-15:40</td>
            <td>-</td>
          </tr>
        </tbody>
      </table>
      <p>課後安親將依每學期開班公告。</p>
    `
  },
  {
    question: { title: '10. 同心的學費？' },
    answer: `
      <p>本機構為非營利組織，可用經費並不充裕。</p>
      <p>每位學生所繳交之費用（學費與雜費）皆為辦學所需。</p>
      <p>小學部學費為每學期75,000元，中學部為85,000元。</p>
      <p>午餐費目前為每餐90元，將視物價狀況酌以調整。</p>
      <p>若家長們想幫孩子申請就讀同心，需參加招生入學說明會</p>
      <p>再從同心官網下載入學簡章申請書，以電腦繕打或手寫方式完成後</p>
      <p>繳交至同心華德福實驗教育機構。</p>
      <p>若有任何疑問，歡迎來電洽詢或Email聯繫。</p>
    `
  }
];